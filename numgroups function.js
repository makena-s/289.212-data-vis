// find number of groups inside a specified group

beetledata = {

    "order-Coleoptera": {
        "suborder-Protocoleoptera": {
            "infraorder-None1": {
                "clade-None1": {
                    "superfamily-Tshekardocoleoidea": ["Tshekardocoleidae", "Labradorocoleidae", "Oborocoleidae"],
                    "superfamily-Permocupedoidea": ["Permocupedidae", "Taldycupedida", "Ademosynidae", "Permosynidae"]
                }
            }
        },
        "suborder-Archostemata": {
            "infraorder-None2": {
                "clade-None2": {
                    "superfamily-None1": ["Crowsoniellidae", "Cupedidae", "Micromalthidae", "Ommatidae", "Jurodidae", "Triadocupedidae", "Magnocoleidae", "Obrieniidae"]
                }
            }
        },
        "suborder-Myxophaga": {
            "infraorder-None3": {
                "clade-None3": {
                    "superfamily-Asiocoleoidea": ["Asiocoleidae", "Tricoleidae"],
                    "superfamily-Rhombocoleoidea": ["Rhombocoleidae"],
                    "superfamily-Schizophoroidea": ["Schizophoridae", "Catiniidae", "Schizocoleidae"],
                    "superfamily-Lepiceroidea": ["Lepiceridae"],
                    "superfamily-Sphaeriusoidea": ["Torridincolidae", "Hydroscaphidae", "Sphaeriusidae"],
                }
            }
        },
        "suborder-Adephaga": {
            "infraorder-None4": {
                "clade-None4": {
                    "superfamily-None2": ["Tritarsidae", "Gyrinidae", "Trachypachidae", "Rhysodidae", "Carabidae", "Haliplidae", "Triaplidae", "Colymbotethidae", "Parahygrobiidae", "Coptoclavidae", "Liadytidae", "Meruidae", "Noteridae", "Amphizoidae", "Aspidytidae", "Hygrobiidae", "Dytiscidae"]
                }
            }
        },
        "suborder-Polyphaga": {
            "infraorder-Staphyliniformia": {
                "clade-None5": {
                    "superfamily-Hydrophiloidea": ["Hydrophilidae", "Sphaeritidae", "Synteliidae", "Histeridae"],
                    "superfamily-Staphylinoidea": ["Hydraenidae", "Ptiliidae", "Agyrtidae", "Leiodidae", "Silphidae", "Staphylinidae"]
                }
            },
            "infraorder-Scarabaeiformia": {
                "clade-None6": {
                    "superfamily-Scarabaeoidea": ["Pleocomidae", "Geotrupidae", "Belohinidae", "Passalidae", "Trogidae", "Glaresidae", "Diphyllostomatidae", "Lucanidae", "Ochodaeidae", "Hybosoridae", "Glaphyridae", "Scarabaeidae", "Coprinisphaeridae", "Pallichnidae"],
                }
            },
            "infraorder-Elateriformia": {
                "clade-None7": {
                    "superfamily-Scirtoidea": ["Decliniidae", "Eucinetidae", "Clambidae", "Scirtidae", "Elodophthalmidae", "Mesocinetidae"],
                    "superfamily-Dascilloidea": ["Dascillidae", "Rhipiceridae"],
                    "superfamily-Buprestoidea": ["Schizopodidae", "Buprestidae"],
                    "superfamily-Byrrhoidea": ["Byrrhidae", "Elmidae", "Dryopidae", "Lutrochidae", "Limnichidae", "Heteroceridae", "Psephenidae", "Cneoglossidae", "Ptilodactylidae", "Podabrocephalidae", "Chelonariidae", "Eulichadidae", "Callirhipidae"],
                    "superfamily-Elateroidea": ["Artematopodidae", "Brachypsectridae", "Cantharidae", "Cerophytidae", "Elateridae", "Eucnemidae", "Lampyridae", "Lycidae", "Omethidae", "Phengodidae", "Rhagophthalmidae", "Sinopyrophoridae", "Throscidae", "Berendtimiridae", "Praelateriidae"],
                    "superfamily-Rhinorhipoidea": ["Rhinorhipidae"]
                }
            },
            "infraorder-Bostrichiformia": {
                "clade-None8": {
                    "superfamily-Derodontoidea": ["Derodontidae", "Nosodendridae", "Jacobsoniidae"],
                    "superfamily-Bostrichoidea": ["Dermestidae", "Endecatomidae", "Bostrichidae", "Ptinidae"]
                }
            },
            "infraorder-Cucujiformia": {
                "clade-None9": {
                    "superfamily-Lymexyloidea": ["Lymexylidae"],
                    "superfamily-Cleroidea": ["Phloiophilidae", "Trogossitidae", "Chaetosomatidae", "Metaxinidae", "Thanerocleridae", "Cleridae", "Acanthocnemidae", "Phycosecidae", "Prionoceridae", "Mauroniscidae", "Melyridae"],
                    "superfamily-Cucujoidea": ["Parandrexidae", "Sinisilvanidae", "Boganiidae", "Byturidae", "Helotidae", "Protocucujidae", "Sphindidae", "Biphyllidae", "Erotylidae", "Monotomidae", "Hobartiidae", "Cryptophagidae", "Agapythidae", "Priasilphidae", "Phloeostichidae", "Silvanidae", "Cucujidae", "Myraboliidae", "Cavognathidae", "Lamingtoniidae", "Passandridae", "Phalacridae", "Propalticidae", "Laemophloeidae", "Tasmosalpingidae", "Cyclaxyridae", "Kateretidae", "Nitidulidae", "Smicripidae", "Bothrideridae", "Cerylonidae", "Alexiidae", "Discolomatidae", "Endomychidae", "Coccinellidae", "Corylophidae", "Akalyptoischiidae", "Latridiidae"],
                    "superfamily-Tenebrionoidea": ["Mycetophagidae", "Archeocrypticidae", "Pterogeniidae", "Ciidae", "Tetratomidae", "Melandryidae", "Mordellidae", "Ripiphoridae", "Zopheridae", "Ulodidae", "Promecheilidae", "Chalcodryidae", "Trachelostenidae", "Tenebrionidae", "Prostomidae", "Synchroidae", "Stenotrachelidae", "Oedemeridae", "Meloidae", "Mycteridae", "Boridae", "Trictenotomidae", "Pythidae", "Pyrochroidae", "Salpingidae", "Anthicidae", "Aderidae", "Scraptiidae"]
                },
                "clade-Phytophaga": {
                    "superfamily-Chrysomeloidea": ["Oxypeltidae", "Vesperidae", "Disteniidae", "Cerambycidae", "Megalopodidae", "Orsodacnidae", "Chrysomelidae"],
                    "superfamily-Curculionoidea": ["Nemonychidae", "Anthribidae", "Ulyanidae", "Belidae", "Caridae", "Attelabidae", "Brentidae", "Dryophthoridae", "Brachyceridae", "Curculionidae"]
                }
            }
        }
    }

}

document.write(countGroups('order-Coleoptera')+ "<br>"); // correct
document.write(countGroups('clade-None1')+ "<br>") // correct
document.write(countGroups('suborder-Polyphaga')+ "<br>") // correct
document.write(countGroups('infraorder-Staphyliniformia')+ "<br>") // correct
document.write('LAST: ' + countGroups('family-Tshekardocoleidae')+ "<br>") // correct

document.write(" ----- " + "<br>")

document.write(findGroups('order-Coleoptera')+ "<br>"); // correct
document.write(findGroups('clade-None1')+ "<br>") // correct
document.write(findGroups('suborder-Polyphaga')+ "<br>") // correct
document.write(findGroups('infraorder-Staphyliniformia')+ "<br>") // correct
document.write('LAST: ' + findGroups('family-Tshekardocoleidae')+ "<br>") // correct

// COUNT GROUPS WITHIN A GROUP
function countGroups(group) {
    result = 0;
    children = [];
    Object.keys(beetledata).forEach(orderkey => {
        // check orders
        if (orderkey == group) {
            result = Object.keys(beetledata[orderkey]).length;
            Object.keys(beetledata["order-Coleoptera"]).forEach(suborderkey => {
                children.push(suborderkey);
            })
        } else {
            Object.keys(beetledata["order-Coleoptera"]).forEach(suborderkey => {
                // check suborders
                if (suborderkey == group) {
                    result = Object.keys(beetledata[orderkey][suborderkey]).length;
                    Object.keys(beetledata["order-Coleoptera"][suborderkey]).forEach(suborderkey => {
                        children.push(suborderkey);
                    })
                } else {
                    Object.keys(beetledata["order-Coleoptera"][suborderkey]).forEach(infrakey => {
                        // check infraorders
                        if (infrakey == group) {
                            result = Object.keys(beetledata[orderkey][suborderkey][infrakey]).length;
                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey]).forEach(suborderkey => {
                                children.push(suborderkey);
                            })
                        } else {
                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey]).forEach(cladekey => {
                                // check clades
                                if (cladekey == group) {
                                    result = Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).length;
                                    Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).forEach(suborderkey => {
                                        children.push(suborderkey);
                                    })
                                } else {
                                    Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).forEach(superfamkey => {
                                        // check superfamilies
                                        if (superfamkey == group) {
                                            result = Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey][superfamkey]).length;
                                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey][superfamkey]).forEach(suborderkey => {
                                                children.push(suborderkey);
                                            })
                                        }
                                    });
                                }
                            });
                        }
                    });
                }
            })
        }
    })
    //return children;
    return result;
};

// NAME GROUPS WITHIN A GROUP
function findGroups(group) {
    result = 0;
    children = [];
    Object.keys(beetledata).forEach(orderkey => {
        // check orders
        if (orderkey == group) {
            result = Object.keys(beetledata[orderkey]).length;
            Object.keys(beetledata["order-Coleoptera"]).forEach(suborderkey => {
                children.push(suborderkey);
            })
        } else {
            Object.keys(beetledata["order-Coleoptera"]).forEach(suborderkey => {
                // check suborders
                if (suborderkey == group) {
                    result = Object.keys(beetledata[orderkey][suborderkey]).length;
                    Object.keys(beetledata["order-Coleoptera"][suborderkey]).forEach(suborderkey => {
                        children.push(suborderkey);
                    })
                } else {
                    Object.keys(beetledata["order-Coleoptera"][suborderkey]).forEach(infrakey => {
                        // check infraorders
                        if (infrakey == group) {
                            result = Object.keys(beetledata[orderkey][suborderkey][infrakey]).length;
                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey]).forEach(suborderkey => {
                                children.push(suborderkey);
                            })
                        } else {
                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey]).forEach(cladekey => {
                                // check clades
                                if (cladekey == group) {
                                    result = Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).length;
                                    Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).forEach(suborderkey => {
                                        children.push(suborderkey);
                                    })
                                } else {
                                    Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey]).forEach(superfamkey => {
                                        // check superfamilies
                                        if (superfamkey == group) {
                                            result = Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey][superfamkey]).length;
                                            Object.keys(beetledata["order-Coleoptera"][suborderkey][infrakey][cladekey][superfamkey]).forEach(suborderkey => {
                                                children.push(suborderkey);
                                            })
                                        }
                                    });
                                }
                            });
                        }
                    });
                }
            })
        }
    })
    return children;
    //return result;
};


